<link rel="import" href="../../bower_components/paper-card/paper-card.html">
<link rel="import" href="../../bower_components/iron-ajax/iron-ajax.html">
<link rel="import" href="../tys-percentage/tys-percentage.html">
<dom-module id="tys-match">
    <template>
        <style include="app-grid-style">
            :host {
                display: inline-block;
                width: 100%;
                --app-grid-columns: 3;
                --app-grid-item-height: 80px;
            }
            ul {
                padding: 0;
                list-style: none;
            }
            paper-card{width: 100%;}
            .confirm iron-icon{float: left; color: green; padding: 20px; width: 50px; height: 50px; }
            tys-percentage{float: right;}
            paper-button{width:49%; display: inline-block; float:left; text-align: center;}
            paper-button.red{background-color: var(--paper-red-200);}
            paper-button.green{background-color: var(--paper-green-200);}
        </style>
        <paper-card style="padding-top: 10px;">
            <ul class="app-grid">
                <li class="item confirm"><iron-icon icon="icons:check-circle" on-tap="select_match"></iron-icon></li>
                <li class="item">
                    <div class="basic"><span class="name">{{fullname}}</span> - <span class="bday">{{person.gbdatum.year}}</span> - <span class="sex">{{person.geslacht}}</span></div>
                </li>
                <li class="item"><tys-percentage percentage="{{percentage}}"></tys-percentage></li>
            </ul><br>
<!--            <div class="card-actions">-->
            <div>
                <paper-button raised class=red><iron-icon icon="close"></iron-icon></paper-button>
                <paper-button raised class=green><iron-icon icon="favorite"></iron-icon></paper-button>
            </div>
            
        </paper-card>
        <iron-ajax
                   id="requestPerson"
                   url="{{url}}"
                   handle-as="json"
                   on-response="handleResponse">
        </iron-ajax>

    </template>
    <script>
        Polymer({	    
            is: 'tys-match',
            properties: {
                percentage: {
                    type: String,
                },
                url: {
                    type: String,
                },
                person: {
                    type: Object
                },
                fullname: {
                    type: String,
                    computed: 'computeFullName(person.voornaam, person.achternaam)'
                },
            },
            ready: function () {
                this.$.requestPerson.generateRequest();
            },
            handleResponse: function (data) {
                this.person = data.detail.response;
            },
            computeFullName: function(firstName, lastName) {
                return firstName + ' ' + lastName;
            },
            select_match: function(){
                alert(this.fullname);
            }
        });
    </script>
</dom-module>